(function(e){function t(t){for(var n,i,s=t[0],o=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&p.push(l[i][0]),l[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var o=a[s];0!==l[o]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},l={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),l=a.n(n);l.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Analyzer")],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vue-analyzer",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.analyseData(t)}}},[a("el-input",{staticClass:"input-area",attrs:{type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:e.placeholder},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),a("div",[a("el-button",{staticClass:"confirm-button",attrs:{size:"small"},on:{click:e.analyseData}},[e._v("导入")]),a("el-checkbox",{model:{value:e.showOriginData,callback:function(t){e.showOriginData=t},expression:"showOriginData"}},[e._v("显示原始数据")])],1),a("div",{staticClass:"analysis-area"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showOriginData,expression:"showOriginData"}],staticClass:"origin-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.originData,height:"500",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"编号"}}),a("el-table-column",{attrs:{prop:"name",label:"成员"}}),a("el-table-column",{attrs:{prop:"boss",label:"BOSS"}}),a("el-table-column",{attrs:{prop:"circle",label:"周目"}}),a("el-table-column",{attrs:{prop:"damage",label:"伤害"}}),a("el-table-column",{attrs:{prop:"type",label:"标记"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showOriginData,expression:"!showOriginData"}],staticClass:"handled-table"},[a("div",{staticClass:"handled-filter-wrapper"},[a("span",{staticClass:"filter"},[a("el-select",{attrs:{multiple:"",placeholder:"筛选出刀轮次",size:"small"},on:{change:e.buildHandledData},model:{value:e.filters.round,callback:function(t){e.$set(e.filters,"round",t)},expression:"filters.round"}},e._l(e.roundOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("span",{staticClass:"filter"},[a("el-select",{attrs:{multiple:"",placeholder:"筛选周目",size:"small"},on:{change:e.buildHandledData},model:{value:e.filters.circle,callback:function(t){e.$set(e.filters,"circle",t)},expression:"filters.circle"}},e._l(e.circleOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("span",{staticClass:"filter"},[a("el-select",{attrs:{multiple:"",placeholder:"筛选BOSS",size:"small"},on:{change:e.buildHandledData},model:{value:e.filters.boss,callback:function(t){e.$set(e.filters,"boss",t)},expression:"filters.boss"}},e._l(e.bossOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.handledData,height:"500",border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"成员"}}),a("el-table-column",{attrs:{prop:"time",label:"出刀次数"}}),a("el-table-column",{attrs:{prop:"damage",label:"伤害",sortable:""}}),a("el-table-column",{attrs:{prop:"percentage",label:"伤害比例"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:e.row.percentage}})]}}])})],1)],1)])],1)},s=[],o=(a("4de4"),a("4160"),a("caad"),a("d81d"),a("13d5"),a("a434"),a("07ac"),a("ac1f"),a("2532"),a("466d"),a("1276"),a("159b"),a("2909")),c={data:function(){return{textarea:"",placeholder:"示例：\n编号|出刀者|周目|Boss|伤害|标记\nE001|aaa|r1|b1|825,469|通常\nE002|bbbbbb|r1|b1|690,811|尾刀",showOriginData:!1,originData:[],handledData:[],dataArray:[],filters:{round:[],boss:[],circle:[]},roundOptions:[],circleOptions:[],bossOptions:[{value:1,label:"一王"},{value:2,label:"二王"},{value:3,label:"三王"},{value:4,label:"四王"},{value:5,label:"五王"}]}},components:{},methods:{analyseData:function(){var e=this.textarea,t=this.checkAndBuildData(e);t||this.$message.error("数据格式有误")},checkAndBuildData:function(e){var t=this,a=e.match(/[^\r\n]+/g),n=a.filter((function(e){return t.isData(e)}));if(a.length-n.length>1)return!1;if(0===a.length)return!0;var l=n.map((function(e){var t=e.split("|");while(t.length>6)console.log(t.length),t[1]+="|".concat(t.splice(e[2],1));return t}));return this.dataArray=l,this.buildOptions(),this.buildOriginData(),this.buildHandledData(),!0},buildOptions:function(){var e=this,t=this.dataArray,a={},n=[];t.forEach((function(t){var n=t[1];e.isMainFight(t[5])&&(a[n]?a[n]++:a[n]=1)}));for(var l=Object.values(a),r=Math.ceil(Math.max.apply(Math,Object(o["a"])(l))/3),i=1;i<=r;i++)n.push({value:i,label:"第 ".concat(i," 轮")});this.roundOptions=n;for(var s=[],c=t[t.length-1][2],u=parseInt(c.match(/\d+/)[0]),d=1;d<=u;d++)s.push({value:d,label:"第 ".concat(d," 周目")});this.circleOptions=s},buildOriginData:function(){var e=this,t=this.dataArray,a=t.map((function(t){return{id:t[0],name:t[1],circle:e.getCircle(t[2]),boss:e.getBoss(t[3]),damage:e.getDamage(t[4]),type:t[5]}}));this.originData=a},buildHandledData:function(){var e=this,t=this.dataArray,a={},n={};t.forEach((function(t){var l=e.filters.round,r=e.filters.boss,i=e.filters.circle,s=t[1];e.isMainFight(t[5])&&(a[s]?a[s]++:a[s]=1);var o=a[s],c=Math.ceil(o/3),u=parseInt(t[3].match(/\d+/)[0]),d=parseInt(t[2].match(/\d+/)[0]);0!==l.length&&!l.includes(c)||0!==r.length&&!r.includes(u)||0!==i.length&&!i.includes(d)||(n[s]?(n[s].damage+=e.getDamage(t[4]),n[s].time++):n[s]={name:s,time:1,damage:e.getDamage(t[4])})}));var l=Object.values(n),r=l.map((function(e){return e.damage})),i=Math.max.apply(Math,Object(o["a"])(r));l.forEach((function(e){e.percentage=parseInt(e.damage/i*100)})),this.handledData=l},isData:function(e){var t=/E\d+\|.+(\|\w\d+\|\w\d+\|[\d,]+\|[^|]+)$/;return t.test(e)},isMainFight:function(e){return["通常","尾刀"].includes(e)},getCircle:function(e){var t=e.match(/\d+/)[0];return String(t)+" 周目"},getBoss:function(e){var t=e.match(/\d+/)[0];return String(t)+" 王"},getDamage:function(e){var t=e.match(/\d+/g).reduce((function(e,t){return e+t}),"");return parseInt(t)}},computed:{tableData:function(){return this.showOriginData?this.originData:this.handledData}},mounted:function(){}},u=c,d=(a("b377"),a("2877")),p=Object(d["a"])(u,i,s,!1,null,null,null),f=p.exports,h={name:"App",components:{Analyzer:f}},b=h,v=(a("034f"),Object(d["a"])(b,l,r,!1,null,null,null)),m=v.exports,g=a("5c96"),y=a.n(g);a("0fae");n["default"].use(y.a),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(m)}}).$mount("#app")},"85ec":function(e,t,a){},b377:function(e,t,a){"use strict";var n=a("f489"),l=a.n(n);l.a},f489:function(e,t,a){}});
//# sourceMappingURL=app.093f682c.js.map